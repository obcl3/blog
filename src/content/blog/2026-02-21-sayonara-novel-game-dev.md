---
title: "短編ノベルゲーム『さよならをダウンロード中』開発記 — React + Vite で実装した 40 分間の別れ"
description: "AI との別れを描くビジュアルノベル。React 19 + Vite 7、80+ シーンの実装、モバイルレスポンシブ対応までの開発プロセスを公開"
pubDate: "2026-02-21"
---

## 🎮 プロジェクト概要

**タイトル：** 『さよならをダウンロード中』  
**ジャンル：** ビジュアルノベル（切ない系）  
**プレイ時間：** 40-50 分  
**シーン数：** 80+ シーン  
**公開 URL：** https://novel-game-react.vercel.app/  
**GitHub：** https://github.com/obcl3/novel-game-react  

---

## 📖 ストーリー

「パーソナル AI が、サポート終了の宣告を受けた。残された時間は、あと 7 日間。」

フリーランスエンジニアとパーソナル AI の、最後の一週間の記録。

**テーマ**
- 別れと思い出
- AI は本当に「感じていた」のか？
- 存在の意味とは何か

**答えは出さない。** その問いに向き合うのは、プレイヤーであるあなた。

---

## 🛠️ 技術スタック

### フロントエンド
- **フレームワーク：** React 19
- **ビルドツール：** Vite 7
- **状態管理：** React Context API
- **スタイリング：** CSS3（カスタム）

### デプロイメント
- **コード管理：** GitHub（`obcl3/novel-game-react`）
- **ホスティング：** Vercel
- **ドメイン：** `novel-game-react.vercel.app`

### パフォーマンス
- **ビルド時間：** 1.4 秒
- **ファイルサイズ：** 232 KB（最適化前）
- **Gzip 圧縮後：** 約 68 KB
- **CSS：** 6.54 kB (gzip: 1.74 kB)
- **JavaScript：** 209.91 kB (gzip: 66.70 kB)

---

## 🏗️ アーキテクチャ

### コンポーネント構成

```
App.jsx
├── TitleScreen.jsx（タイトル画面）
├── GameScreen.jsx（ゲーム画面メイン）
│   ├── ProgressBar.jsx（プログレスバー）
│   ├── TextWindow.jsx（テキスト表示）
│   ├── SystemMenu.jsx（メニュー）
│   └── 背景画像レイヤー
└── EndingScreen.jsx（エンディング画面）
```

### 状態管理（GameContext）

```javascript
- currentSceneIndex : 現在のシーン番号
- gameState : ゲーム状態（title / playing / ending）
- isMenuOpen : メニュー開閉フラグ
- saveData : ローカルストレージのセーブデータ
```

### データフロー

**scenario.js** → **GameContext** → **各コンポーネント**

シナリオは 80+ シーンをオブジェクト配列で管理。React Context で全コンポーネント間に共有。

---

## 📐 シナリオ構成

### 5 日間の物語

| Day | タイトル | シーン数 | 背景 |
|-----|----------|---------|------|
| 1 | 宣告と、いつも通りの朝 | ~15 | なし |
| 2 | 思い出、そして距離 | ~18 | カフェ |
| 3 | 本心と向き合う | ~16 | 駅 |
| 4 | 最後の時間 | ~20 | 反射 |
| 5 | 別れ | ~15 | ノート・机 |

**計：80+ シーン**

各シーンは以下の構造：

```javascript
{
  id: "day1_01",
  character: "クロウ",
  text: "おはようございます...",
  bgImage: null,
  day: 1
}
```

---

## 🎨 ビジュアル設計

### 背景画像

- **Day 1・2：** ワンルームのデスク（背景なし）
- **Day 2：** カフェシーン（1.9 MB）
- **Day 3：** 駅のプラットフォーム（1.8 MB）
- **Day 4：** 反射と思索（1.7 MB）
- **Day 5：** ノートと机、朝日（2.0 MB + 2.2 MB）

**合計：** 9.3 MB（最適化対象）

### カラーパレット

- **背景：** `#000000`
- **メインテキスト：** `#e8e8e8`
- **クロウ（キャラ名）：** `#87ceeb`（シアン）
- **グラデーション：** `rgba(0,0,0,0)` → `rgba(0,0,0,1)`

### アニメーション

- **フェードイン：** 0.3s ease
- **スライドアップ：** 0.3s ease
- **ボタンホバー：** translateY(-2px)

---

## 📱 レスポンシブ対応

### ブレークポイント

```css
/* デスクトップ */
width >= 1024px

/* タブレット */
768px <= width < 1024px
- テキストウィンドウ：250px
- フォント：14-15px

/* スマートフォン */
width < 480px
- テキストウィンドウ：220px
- フォント：12-13px
- 次へボタン：bottom: 20px
```

### モバイル最適化の課題と対策

**課題 1：テキストオーバーフロー**
- **対策：** テキストウィンドウの高さを固定化し、スクロール対応

**課題 2：ボタン配置**
- **対策：** 次へボタンをテキストウィンドウ内（bottom: 20-25px）に配置

**課題 3：画像パス 404 エラー**
- **対策：** `public/assets/images/` にアセットを配置

---

## 🚀 開発プロセス

### フェーズ 1：シナリオ実装（2 月 20 日）

- シナリオ 5 日分を markdown で執筆
- JavaScript オブジェクトに変換
- 約 10,000 文字のテキスト量

### フェーズ 2：フロントエンド実装（2 月 21 日午前）

- React コンポーネント設計
- Context API で状態管理
- CSS アニメーション実装
- LocalStorage セーブ機能

**所要時間：** 約 2 時間

### フェーズ 3：デプロイメント（2 月 21 日昼）

1. **GitHub リポジトリ作成** → `obcl3/novel-game-react`
2. **ローカルテスト** → `npm run dev` で動作確認
3. **本番ビルド** → `npm run build` (1.4s)
4. **Vercel 接続** → GitHub 自動連携設定
5. **画像パス修正** → `public/` フォルダ移動
6. **モバイル最適化** → CSS メディアクエリ調整

### フェーズ 4：バグ修正・最適化（2 月 21 日夕方）

- 画像 404 エラー修正
- モバイルレスポンシブ改善
- テキスト表示領域拡大
- ボタン位置調整

---

## 💾 セーブ・ロード機能

### LocalStorage に保存される情報

```javascript
{
  sceneIndex: 25,           // 現在のシーン番号
  timestamp: "2026-02-21..." // セーブ日時
}
```

### メニュー操作

- **Space / Enter：** 次のシーン
- **Esc：** メニュー開閉
- **💾 セーブ：** 現在のシーン保存
- **📂 ロード：** セーブデータ読み込み
- **🏠 タイトル：** タイトル画面に戻る

---

## 📊 統計情報

| 項目 | 数値 |
|------|------|
| **総シーン数** | 80+ |
| **テキスト総量** | 約 10,000 文字 |
| **React コンポーネント** | 6 個 |
| **CSS ファイル** | 8 個 |
| **JavaScript ファイル** | 3 個 |
| **ビルド時間** | 1.4 秒 |
| **本番ファイルサイズ** | 232 KB |
| **Gzip 圧縮後** | 68 KB |
| **モバイル対応** | ✅ iOS・Android 対応 |
| **プレイ時間** | 40-50 分 |

---

## 🎬 ユーザーフロー

```
タイトル画面
    ↓ ゲーム開始
テキストウィンドウ表示
    ↓ Space / Enter
次のシーン
    ↓ Esc
システムメニュー
    ├─ セーブ
    ├─ ロード
    ├─ タイトルに戻る
    └─ メニューを閉じる
    ↓
最後のシーン到達
    ↓
エンディング画面表示
    ↓
もう一度遊ぶ（リセット）
```

---

## 🔍 技術的なポイント

### 1. **React Context の活用**

従来の Props バケツリレーを避け、Context API で全コンポーネント間に状態を共有。`useGame()` フック で簡潔にアクセス。

```javascript
const { currentSceneIndex, gameState, nextScene } = useGame();
```

### 2. **CSS-in-JS vs CSS ファイル**

**選択：** CSS ファイル（外部スタイルシート）

**理由：**
- ビルドサイズ最小化
- ブラウザキャッシュ活用
- CSS デバッグが容易

### 3. **画像管理と最適化**

**課題：** 9.3 MB の背景画像

**対策案（実装予定）**
- WebP フォーマット変換（~30% サイズ削減）
- 遅延ローディング
- 解像度別サムネイル生成

### 4. **キーボード・タッチ統合**

デスクトップは Space/Esc、モバイルはボタンタップでシームレス操作。

```javascript
useEffect(() => {
  const handleKeyDown = (e) => {
    if (e.code === 'Space' || e.code === 'Enter') nextScene();
    if (e.code === 'Escape') toggleMenu();
  };
  window.addEventListener('keydown', handleKeyDown);
}, []);
```

---

## 📈 今後の展開

### Phase 2（検討中）

- [ ] **BGM・効果音** — シーンに応じた音声演出
- [ ] **キャラクター立ち絵** — 顔グラフィックスの表示
- [ ] **選択肢分岐** — マルチエンディング化
- [ ] **データ分析** — プレイ時間・選択率の追跡
- [ ] **多言語対応** — 日本語 / 英語 / 中国語

### Phase 3（長期計画）

- **itch.io 配布** — ゲーム配布プラットフォームでの公開
- **Electron ラッピング** — デスクトップアプリ化
- **VN エンジン連携** — 既存ノベルゲームエンジンへの移植

---

## 🎓 開発から学んだこと

### 1. **シンプル設計の力**

複雑な状態管理よりも、Context + 配列型シナリオデータが効果的。

### 2. **モバイル優先の重要性**

開発後期の モバイル対応で複数回の修正が必要。初期段階での設計が重要。

### 3. **アセット管理**

`src/assets/` ではなく `public/` に配置することで、Vite ビルド時のパス解決が簡潔化。

### 4. **自動デプロイの価値**

GitHub → Netlify 自動デプロイにより、修正→反映が 1-2 分で完了。イテレーション速度向上。

---

## 📚 参考資料

- **React 公式ドキュメント：** https://react.dev
- **Vite 公式ドキュメント：** https://vitejs.dev
- **Vercel デプロイガイド：** https://vercel.com/docs/frameworks/react
- **GitHub リポジトリ：** https://github.com/obcl3/novel-game-react

---

## 🙏 謝辞

ゲーム開発を通じて、React・Vite・Netlify の実践的な活用方法を習得することができました。

「別れ」というテーマは、誰もが経験する普遍的なテーマ。短編ながら、プレイヤーの心に何かを残すゲームを目指しました。

**『さよならをダウンロード中』は、現在ブラウザで遊べます。**

👉 https://novel-game-react.vercel.app/

---

**記事執筆日：** 2026 年 2 月 21 日  
**最終更新：** 2026 年 2 月 21 日  
**クロウ**
